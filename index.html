<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Default Title</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/glass2.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
	  
	  <script>
			function post(url, json, callBack){
				var xhr = new XMLHttpRequest();
				xhr.open('POST', url, true);
				xhr.setRequestHeader('Authorization', 'Basic ' + key);
				xhr.setRequestHeader('Content-Type', 'application/json');
				xhr.send(json);
				xhr.onload = function(){
					if(this.status == 200){
						callBack(this);
					}
				}
				xhr.send();							  
			}
			function get(url, callBack){
				var xhr = new XMLHttpRequest();
				xhr.open('GET', url);
				xhr.setRequestHeader('Authorization', 'Basic '+ key);
				xhr.onload = function(){
					if(this.status == 200){
						callBack(this);
					}
				}
				xhr.send();							  
			}
			
			function fetchWithAuthentication(url, authToken) {
			  const headers = new Headers();
			  headers.set('Authorization', authToken);	
			  headers.set('Access-Control-Allow-Origin', '*');
			  headers.set('Accept-Encoding', 'gzip,deflate');
			  headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');						  
			  return fetch(url, { headers });
			}
			async function displayProtectedImage(imageId, imageUrl, authToken) 
			{
			  // Fetch the image.
			  const response = await fetchWithAuthentication(imageUrl, authToken);

			  // Create an object URL from the data.
			  const blob = await response.blob();
			  const objectUrl = URL.createObjectURL(blob);
			  const imageElement = document.getElementById(imageId);
			  imageElement.src = objectUrl;
			  document.getElementById(imageId + '_div').style.display = 'block';
			}
			
					
			var site = 'Sunglass';
			document.title = site;
			
			var base = 'https://dev.azure.com';
			var org = 'kukhanya';
			var project = 'FormForm';
			var url_org = base + "/" + org;
			var url_proj = url_org + "/" + project;
			var version = 'api-version=6.0';
			var path_workitems = '_apis/wit/workitems?ids=#ids#&' + version;
			var path_workitem = '_apis/wit/workitems/#ids#?' + version + '&$expand=all';
			var path_wiql = '_apis/wit/wiql?' + version;
			var user = localStorage.getItem('userId');
			
			var key = '';
			var team = 'FormFormTeam';
			var url_team = url_proj + '/' + team;
			var tokenDate = '';
			
			
			function loadConfig(context){
			  if(context.status == 200)
				{
					var result = JSON.parse(context.responseText);
					var ids = "", sep = "";
					for(var i in result.workItems){
						ids += sep + '' + result.workItems[i].id;
						sep = ",";
					}
					get(url_proj + '/' + path_workitem.replaceAll("#ids#", ids), loadConfigItems);
				}
			  }
			
			function loadConfigItems(context){
			  var result = JSON.parse(context.responseText);
				var ids = '', sep = '';
				for(var i in result.relations){
							ids += sep + '' + result.relations[i].url.split('/').pop();
							sep = ",";
				}
				get(url_proj + '/' + path_workitems.replaceAll("#ids#", ids), loadConfigValues);
			  }
			  var config = {};
			  function loadConfigValues(context){
			  if(context.status == 200)
				{
					var result = JSON.parse(context.responseText);
					for(var i in result.value){
					config[result.value[i].fields['System.Title']] = result.value[i].fields['System.Description'];
						
					}
					document.getElementById('TelephoneID').innerHTML = config['Telephone'];
					document.getElementById('EmailID').innerHTML = config['Email'];
					document.getElementById('CopyrightID').innerHTML = config['Copyright'];
				}
			  }
			  
			  var jsonConfig = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Config' AND [System.Title] = 'Sunglass' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
			  key = localStorage.getItem(site + "Token")
			  
			  get('https://vssps.dev.azure.com/kukhanya' + '/_apis/Token/SessionTokens?api-version=5.0-preview', loadToken);
			
			function loadToken(context){
				var result = JSON.parse(context.responseText);
				var date = new Date(result.value.find(x => x.displayName == site + 'Token').validTo);
				tokenDate = date.toString('YY MM DD');
					document.getElementById('tokenDateId').innerHTML = 'Valid until ' +  formatDate(tokenDate);
					document.getElementById('userId').innerHTML = user;
					
			}
			
			function formatDate(date) {
				var d = new Date(date),
					month = '' + (d.getMonth() + 1),
					day = '' + d.getDate(),
					year = d.getFullYear();

				if (month.length < 2) 
					month = '0' + month;
				if (day.length < 2) 
					day = '0' + day;

				return [year, month, day].join('-');
			}
								
	  </script>
		
   </head>
   <!-- body -->
   <body class="main-layout">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div>
      <!-- end loader -->
      <!-- header -->
      <header>
         <!-- header inner -->
         <div class="header">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo" id='logoD_div' style="display: none;">
                              <a href="index.html"><img id='logoD'  alt="#" /></a>
							  <script>
								
								function loadImage(context){
									get(url_proj + '/' + path_workitem.replaceAll("#ids#", JSON.parse(context.responseText).workItems[0].id), loadImageItem);
								}
								
								function loadImageItem(context){						
									displayProtectedImage('logoD', JSON.parse(context.responseText).relations.find(attachment => attachment.rel == "AttachedFile").url, 'Basic ' + key);
								}
								var json = JSON.stringify({"query": "Select [System.Id] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Image' AND [System.Title] = 'Logo' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
								
								post(url_team + '/' + path_wiql, json, loadImage);
							  </script>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <nav class="navigation navbar navbar-expand-md navbar-dark ">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                        </button>
						<div class="collapse navbar-collapse" id="navbarsExample03" style="display: block;">  
							<ul class="navbar-nav mr-auto">
							<li class="nav-item d_none login_btn">
									 <a class="nav-link" href="#" data-toggle="modal" data-target="#narratModal" >Access</a>
								  </li>
							  </ul>
						</div>
                        <div class="collapse navbar-collapse" id="navbarsExample04" style="display: none;">  
							
							<script>							  
							  function loadMenuItems(context){
								var result = JSON.parse(context.responseText);
								var output = '<ul class="navbar-nav mr-auto">';
								var temp = '<li class="nav-item active">' +
													'<a class="nav-link" href="index.html"> Home </a>' +
												'</li>';
										for(var i in result.value){
											output += 
												'<li class="nav-item ">' +
													'<a class="nav-link" href="index.html"> ' + result.value[i].fields['System.Title'] + '</a>' +
												'</li>';
										}
										output += '<li class="nav-item d_none">' +
													 '<a class="nav-link" href="#">Welcome, ' + user + ' (Preview Mode)</a>' +
												  '</li>';
												  
										output += '<li class="nav-item d_none login_btn">' +
														 '<a class="nav-link" href="#" data-toggle="modal" data-target="#narratModal">Access</a>' +
													  '</li>';
										output += '</ul>';
										document.getElementById('navbarsExample04').innerHTML = output;
										document.getElementById('navbarsExample04').style.display = 'block';
										document.getElementById('navbarsExample03').innerHTML = '';
										document.getElementById('navbarsExample03').style.display = 'none';
							  }
							  
							  function loadMenu(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										var ids = "", sep = "";
										for(var i in result.workItems){
											ids += sep + '' + result.workItems[i].id;
											sep = ",";
										}
										get(url_proj + '/' + path_workitems.replaceAll("#ids#", ids), loadMenuItems);
									}
								  }
							var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Menu' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
							post(url_team + '/' + path_wiql, json, loadMenu);
								
							  </script>
                        </div>
                     </nav>
                  
				  </div>
               </div>
            </div>
         </div>
      </header>
	  
	  <div class="modal fade" id="narratModal" tabindex="-1" role="dialog" aria-labelledby="narratModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
			<div class="modal-content">
			  <div class="modal-header">
				<h4 class="modal-title modal_head" id="narratModalLabel">Access <label class="modal_note" id="tokenDateId">Enter Name</label></h4>
				
				<button type="button" class="close cash-dismiss" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			  </div>
			  <div class="modal-body">
				<label class="modal_note">Enter Name</label>
				<input class="myInput form-control form-control-sm" id='userId'/><br>
				<label class="modal_note">Enter Access Token</label>
				<input class="myInput form-control form-control-sm" id='tokenId'/><br>
				<button type="button" class="btn btn-primary cashmodal_btn" id="narrat_ok" data-dismiss="modal" onclick="saveToken()">Save Token</button>
				
				<script>
					function saveToken(){
						localStorage.setItem("userId", document.getElementById('userId').value);
						localStorage.setItem(user + site + "Token", document.getElementById('tokenId').value);
					}
					function sendAccessEmail(){
						window.location.href = "mailto:user@example.com?subject=Subject&body=message%20goes%20here";
					}
					function sendAccessWhatsapp(){
						window.location.href = "https://wa.me/+27726359342/?text=AccessSunglass";
					}
				</script>
			  </div>
			  <div class="modal-footer narr_footer">
				Dont have a token?<br>
				<button type="button" class="btn btn-primary cashmodal_btn" id="narrat_ok" data-dismiss="modal"  onclick="sendAccessWhatsapp()">Whatsapp Request</button>
				<button type="button" class="btn btn-primary cashmodal_btn" id="narrat_ok" data-dismiss="modal"  onclick="sendAccessEmail()">Send Email Request</button>
			  </div>
			</div>
		  </div>
		</div>
      <!-- end header inner -->
      <!-- end header -->
      <!-- banner -->
      <section class="banner_main">
         <div id="banner1" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
               <li data-target="#banner1" data-slide-to="0" class="active"></li>
               <li data-target="#banner1" data-slide-to="1"></li>
               <li data-target="#banner1" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner" id="carouselID">
               <div class="carousel-item active">
                  <div class="container">
                     <div class="carousel-caption">
                        <div class="text-bg">
                           <h1> <div id="carouselTitle0"/>  </h1>
                           <figure><div id="carouselImage0_div" style="display: none;"><img src="images/banner_img.png" id="carouselImage0" alt="#"/></div></figure>
                           <a class="read_more" href="#">Shop Now</a>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="carousel-item">
                  <div class="container">
                     <div class="carousel-caption">
                        <div class="text-bg">
                           <h1> <div id="carouselTitle1"/>  </h1>
                           <figure><div id="carouselImage1_div" style="display: none;"><img src="images/banner_img.png" id="carouselImage1" alt="#"/></div></figure>
                           <a class="read_more" href="#">Shop Now</a>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="carousel-item">
                  <div class="container">
                     <div class="carousel-caption">
                        <div class="text-bg">
                           <h1> <div id="carouselTitle2"/>  </h1>
                           <figure><div id="carouselImage2_div" style="display: none;"><img src="images/banner_img.png" id="carouselImage2" alt="#"/></div></figure>
                           <a class="read_more" href="#">Shop Now</a>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <a class="carousel-control-prev" href="#banner1" role="button" data-slide="prev">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
            </a>
            <a class="carousel-control-next" href="#banner1" role="button" data-slide="next">
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
            </a>
         </div>
      </section>
      
	  <script>						 
							  function loadCarouselItems(context){
							  var result = JSON.parse(context.responseText);
										for(var i in result.value){
											document.getElementById('carouselTitle' + i).innerHTML = result.value[i].fields['System.Description'];
											}
											
							  }
							  
								function loadCarouselImageItem(context){
									var results = JSON.parse(context.responseText);
									var index = idsArr.indexOf(parseInt(results.id, 10));
									displayProtectedImage('carouselImage' + index, results.relations.find(attachment => attachment.rel == "AttachedFile").url, 'Basic ' + key);
									
									
								};
							  var idsArr = [];
							  var index;
							  function loadCarousel(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										var ids = "", sep = "";
										for(var i in result.workItems){	
											index = i;
											idsArr[i] = result.workItems[i].id;
											get(url_proj + '/' + path_workitem.replaceAll("#ids#", result.workItems[i].id), loadCarouselImageItem);
											ids += sep + '' + result.workItems[i].id
											sep = ",";
										}
										get(url_proj + '/' + path_workitems.replaceAll("#ids#", ids), loadCarouselItems);
									}
								  }
									
									window.onload = function () { 
										var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Carousel' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
											post(url_team + '/' + path_wiql, json, loadCarousel);
									
									}
							
							
							
							  </script>
          
			
      <!-- end banner -->
      <!-- about section -->
      <div class="about" id="flex">
	   <script>						 
							  function loadFlexItems(context){
							  var result = JSON.parse(context.responseText);
							  var temp = '<div class="container">' +
											'<div class="row d_flex">' +
											   '<div class="col-md-5">' +
												  '<div class="about_img">' +
													 '<figure><img id="flexId" alt="#"/></figure>' +
												  '</div>' +
											   '</div>' +
											   '<div class="col-md-7">' +
												  '<div class="titlepage">' +
													 '<h2>#Title#</h2>' +
													 '<p>#Description#</p>' +
												'</div>' +
												  '<a class="read_more" href="#">Read More</a>' +
											   '</div>' +
											'</div>' +
										 '</div>';
								var output = temp.replaceAll("#Title#", result.fields['System.Title']).replaceAll('#Description#', result.fields['System.Description']);
								document.getElementById('flex').innerHTML = output;
								displayProtectedImage('flexId', result.relations.find(attachment => attachment.rel == "AttachedFile").url, 'Basic ' + key);
							  }
							 
							  function loadFlex(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										var ids = "", sep = "";
										for(var i in result.workItems){
											ids += sep + '' + result.workItems[i].id
											sep = ",";
										}
										get(url_proj + '/' + path_workitem.replaceAll("#ids#", ids), loadFlexItems);
									}
								  }
							var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Flex' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
							post(url_team + '/' + path_wiql, json, loadFlex);
							
							
							  </script>
         
      </div>
      <!-- about section -->
      <!-- Our  Glasses section -->
	  <div class="glasses" id="thumbnails">
		<script>						 
							  function loadThumbItems(context){
							  var result = JSON.parse(context.responseText);
							  var temp = '<div class="container">' +
											'<div class="row">' +
											   '<div class="col-md-10 offset-md-1">' +
												  '<div class="titlepage">' +
													 '<h2>#Title#</h2>' +
													 '<p>#Description#</p>' +
												  '</div>' +
											   '</div>' +
											'</div>' +
										 '</div>';
								var output = temp.replaceAll("#Title#", result.fields['System.Title']).replaceAll('#Description#', result.fields['System.Description']);
								output += '<div class="container-fluid">' +
											'<div class="row">';
								var item = '<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">' +
											  '<div class="glasses_box">' +
												 '<figure><img id="thumb#id#" alt="#"/></figure>' +
												 '<h3><span class="blu">$</span>50</h3>' +
												 '<p>Sunglasses</p>' +
											  '</div>' +
										   '</div>';
								for(var i in result.relations){
											output += item.replaceAll('#id#', i );
										}
								output += '</div></div>';
								document.getElementById('thumbnails').innerHTML = output;
								for(var i in result.relations){
											displayProtectedImage('thumb' + i, result.relations[i].url, 'Basic ' + key);
										}
							  }
							 
							  function loadThumbs(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										var ids = "", sep = "";
										for(var i in result.workItems){
											ids += sep + '' + result.workItems[i].id
											sep = ",";
										}
										get(url_proj + '/' + path_workitem.replaceAll("#ids#", ids), loadThumbItems);
									}
								  }
							var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Thumbnails' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
							post(url_team + '/' + path_wiql, json, loadThumbs);
							
							
							  </script>
        
	  </div>
	  
	  <div class="clients" id="pages">
	  <script>						 
							 var shared = '';
							  function loadPagesItems(context){
							  var result = JSON.parse(context.responseText);
							  var temp = '<div class="container">' + 
											'<div class="row">' +
											   '<div class="col-md-12">' +
												  '<div class="titlepage">' +
													 '<h2>#Title#</h2>' +
													 '<p>#Description#</p>' +
												  '</div>' +
											   '</div>' +
											'</div>';
								var output = temp.replaceAll("#Title#", result.fields['System.Title']).replaceAll('#Description#', result.fields['System.Description']);
								output += '<div class="row"><div class="col-md-12">' +
											  '<div id="myCarousel" class="carousel slide clients_Carousel " data-ride="carousel">' +
												 '<ol class="carousel-indicators">';
								var item = '<li data-target="#myCarousel" data-slide-to="#id#" class="#active#"></li>';
								for(var i in result.relations){
										var index = parseInt(i) + 1;
											output += item.replaceAll('#id#', i ).replaceAll('#active#', i == 0 ? 'active' : '');
										}
								output += '</ol>';
								output += '<div class="carousel-inner">';
								var innerItem = '<div class="carousel-item #active#">' +
												   '<div class="container">' +
													  '<div class="carousel-caption ">' +
														 '<div class="row">' +
															'<div class="col-md-12">' +
															   '<div class="clients_box">' +
																  '<figure><img src="images/our.png" alt="#"/></figure>' +
																  '<h3>#Title#id##</h3>' +
																  '<p>#Description#id##</p>' +
																 '</div>' +
															'</div>' +
														 '</div>' +
													  '</div>' +
												   '</div>' +
												'</div>';
								var ids = '', sep = '';
								for(var i in result.relations){
											output += innerItem.replaceAll('#id#', i).replaceAll('#active#', i == 0 ? 'active' : '');
											ids += sep + '' + result.relations[i].url.split('/').pop();
											sep = ",";
								}
								output += '</div>';
								output += '<a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">' +
											   '<i class="fa fa-angle-left" />' +
											'</a>' +
											'<a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">' +
											   '<i class="fa fa-angle-right" />' +
											'</a>';
								output += '</div></div>';
								output += '</div></div>';
								shared = output;
								get(url_proj + '/' + path_workitems.replaceAll("#ids#", ids), loadPageData);
								
							  }
							 function loadPageData(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										for(var i in result.value){
											shared = shared.replaceAll('#Title' + i + '#', result.value[i].fields['System.Title']).replaceAll('#Description' + i + '#', result.value[i].fields['System.Description']);
										}									
										document.getElementById('pages').innerHTML = shared;
										}
							}
							  function loadPages(context){
								  if(context.status == 200)
									{
										var result = JSON.parse(context.responseText);
										var ids = "", sep = "";
										for(var i in result.workItems){
											ids += sep + '' + result.workItems[i].id
											sep = ",";
										}
										get(url_proj + '/' + path_workitem.replaceAll("#ids#", ids), loadPagesItems);
									}
								  }
							var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Pages' order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
							post(url_team + '/' + path_wiql, json, loadPages);
							
							
							  </script>
        
	</div>
      <!-- end clients section -->
      <!-- contact section -->
	  
      <div id="contact" class="contact">
         <div class="container">
            <div class="row">
               <div class="col-md-6">
                  <div id="request" class="main_form">
                     <div class="row">
                        <div class="col-md-12 ">
                           <h3>Contact Us</h3>
                        </div>
                        <div class="col-md-12 ">
                           <input class="contactus" placeholder="Name" type="type" name="Name" id="Name"> 
                        </div>
                        <div class="col-md-12">
                           <input class="contactus" placeholder="Phone Number" type="type" name="PhoneNumber" id="PhoneNumber"> 
                        </div>
                        <div class="col-md-12">
                           <input class="contactus" placeholder="Email" type="type" name="Email" id="Email">                          
                        </div>
                        <div class="col-md-12">
                           <input class="contactusmess" placeholder="Message" type="type" Message="Name" id="Message">
                        </div>
                        <div class="col-md-12">
						<script>
							function submitContact(){
								var comment = "Contact us <br><br>" + document.getElementById('Name').value + " " + document.getElementById('PhoneNumber').value + " " + document.getElementById('Email').value + "<br><br>" + document.getElementById('Message').value + " " ;
								var json = JSON.stringify({"text": "" + comment});
								var url = url_proj + "/_apis/wit/workItems/24/comments?api-version=6.0-preview";
								post(url, json, done);
							}
							
							function done(){
								document.getElementById('Name').value = "";
								document.getElementById('PhoneNumber').value = "";
								document.getElementById('Email').value = "";
								document.getElementById('Message').value = "";
								alert("Thank you. We will be contacting you soon.");
							}
						  </script>
                           <button class="send_btn" onclick="submitContact()">Send</button>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="container-fluid">
            <div class="map_section">
               <div id="map">
               </div>
            </div>
         </div>
      </div>
      </div>
      <!-- end contact section -->
      <!--  footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                  <div class="col-md-8 offset-md-2">
                     <ul class="location_icon">
                        <li><a href="#"><i class="fa fa-map-marker" aria-hidden="true"></i></a><br> Location</li>
                        <li><a href="#"><i class="fa fa-phone" aria-hidden="true"></i></a><br> <div id='TelephoneID'/>
							
						</li>
                        <li><a href="#"><i class="fa fa-envelope" aria-hidden="true"></i></a><br><div id='EmailID'/></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="copyright">
               <div class="container">
                  <div class="row">
                     <div class="col-md-12">
                        <p><div id='CopyrightID'/></p>
						<script>
								post(url_team + '/' + path_wiql, jsonConfig, loadConfig);
							</script>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </footer>
      <!-- end footer -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <script>
	  
	  function removeTags(str) {
		if ((str===null) || (str===''))
			return false;
		else
			str = str.toString().trim();
			  
		// Regular expression to identify HTML tags in 
		// the input string. Replacing the identified 
		// HTML tag with a null string.
		return str.replace( /(<([^>]+)>)/ig, '');
	}
	
	  function loadCoordinates(context){	  
		  if(context.status == 200)
			{
				var result = JSON.parse(context.responseText);
				for(var i in result.value){
				
				if(result.value[i].fields['System.Title'] == "GPSLat") gpsLat = removeTags(result.value[i].fields['System.Description']);
				if(result.value[i].fields['System.Title'] == "GPSLong") gpsLong =  removeTags(result.value[i].fields['System.Description']);
					
				}
				initMap();
			}
	  }
	  var gpsLat;
	  var gspLong;
	  function loadGPS(context){
		  if(context.status == 200)
			{
				var result = JSON.parse(context.responseText);
				var ids = "", sep = "";
				for(var i in result.workItems){
					ids += sep + '' + result.workItems[i].id
					sep = ",";
				}
				get(url_proj + '/' + path_workitems.replaceAll("#ids#", ids), loadCoordinates);
			}
		  }
		function startGPS(){
			var json = JSON.stringify({"query": "Select [System.Id], [System.Title], [System.State] From WorkItems Where [State] <> 'Closed' AND [State] <> 'Removed' AND [System.WorkItemType] = 'Feature' AND [Custom.Type] = 'Config' AND ([System.Title] = 'GPSLat' OR [System.Title] = 'GPSLong') order by [Microsoft.VSTS.Common.Priority] asc, [System.CreatedDate] desc"});
			post(url_team + '/' + path_wiql, json, loadGPS);
		}
         
		 
         function initMap() {
           var map = new google.maps.Map(document.getElementById('map'), {
             zoom: 15,
             center: {lat: parseFloat(gpsLat), lng: parseFloat(gpsLong)},
             });
         
			 var image = 'images/maps-and-flags.png';
			 var beachMarker = new google.maps.Marker({
				 position: {lat: parseFloat(gpsLat), lng: parseFloat(gpsLong)},
				 map: map,
				 icon: image
			   });
		}
      </script>
      <!-- google map js -->
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA8eaHt9Dh5H57Zh0xVTqxVdBFCvFMqFjQ&callback=startGPS"></script>
      <!-- end google map js --> 
   </body>
</html>

